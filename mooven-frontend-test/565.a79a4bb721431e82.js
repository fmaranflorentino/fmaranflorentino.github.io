"use strict";(self.webpackChunkangular_movies=self.webpackChunkangular_movies||[]).push([[565],{2565:(lt,T,s)=>{s.r(T),s.d(T,{DetailsModule:()=>st});var p=s(6895),I=s(529),Y=s(4466),v=s(8252),y=s(3361),k=s(394),D=s(7855),u=s(8184),R=s(4080),t=s(4650),L=s(3238),_=s(7579),Z=s(6451),V=s(9770),C=s(9300),b=s(5698),w=s(8675),d=s(7340),m=s(2687),x=s(9521);function U(a,o){}const f={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},P={dialogContainer:(0,d.X$)("dialogContainer",[(0,d.SB)("void, exit",(0,d.oB)({opacity:0,transform:"scale(0.7)"})),(0,d.SB)("enter",(0,d.oB)({transform:"none"})),(0,d.eR)("* => enter",(0,d.ru)([(0,d.jt)("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",(0,d.oB)({transform:"none",opacity:1})),(0,d.IO)("@*",(0,d.pV)(),{optional:!0})]),f),(0,d.eR)("* => void, * => exit",(0,d.ru)([(0,d.jt)("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",(0,d.oB)({opacity:0})),(0,d.IO)("@*",(0,d.pV)(),{optional:!0})]),f)])};class M{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=f.params.enterAnimationDuration,this.exitAnimationDuration=f.params.exitAnimationDuration}}let j=(()=>{class a extends D.LL{constructor(e,i,n,l,r,c,g,h){super(e,i,n,l,r,c,g,h),this._animationStateChanged=new t.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(m.qV),t.Y36(p.K0,8),t.Y36(M),t.Y36(m.ic),t.Y36(t.R0b),t.Y36(u.Iu),t.Y36(m.tE))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],features:[t.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),a})(),E=(()=>{class a extends j{constructor(e,i,n,l,r,c,g,h,A){super(e,i,n,l,r,c,g,A),this._changeDetectorRef=h,this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?this._openAnimationDone(i):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||f.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||f.params.exitAnimationDuration}}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(m.qV),t.Y36(p.K0,8),t.Y36(M),t.Y36(m.ic),t.Y36(t.R0b),t.Y36(u.Iu),t.Y36(t.sBO),t.Y36(m.tE))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,i){1&e&&t.WFA("@dialogContainer.start",function(l){return i._onAnimationStart(l)})("@dialogContainer.done",function(l){return i._onAnimationDone(l)}),2&e&&(t.Ikx("id",i._config.id),t.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),t.d8E("@dialogContainer",i._getAnimationState()))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&t.YNc(0,U,0,0,"ng-template",0)},dependencies:[R.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[P.dialogContainer]}}),a})();class F{constructor(o,e,i){this._ref=o,this._containerInstance=i,this._afterOpened=new _.x,this._beforeClosed=new _.x,this._state=0,this.disableClose=e.disableClose,this.id=o.id,i._animationStateChanged.pipe((0,C.h)(n=>"opened"===n.state),(0,b.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe((0,C.h)(n=>"closed"===n.state),(0,b.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),o.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Z.T)(this.backdropClick(),this.keydownEvents().pipe((0,C.h)(n=>n.keyCode===x.hY&&!this.disableClose&&!(0,x.Vb)(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),function J(a,o,e){a._closeInteractionType=o,a.close(e)}(this,"keydown"===n.type?"keyboard":"mouse"))})}close(o){this._result=o,this._containerInstance._animationStateChanged.pipe((0,C.h)(e=>"closing"===e.state),(0,b.q)(1)).subscribe(e=>{this._beforeClosed.next(o),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(o){let e=this._ref.config.positionStrategy;return o&&(o.left||o.right)?o.left?e.left(o.left):e.right(o.right):e.centerHorizontally(),o&&(o.top||o.bottom)?o.top?e.top(o.top):e.bottom(o.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(o="",e=""){return this._ref.updateSize(o,e),this}addPanelClass(o){return this._ref.addPanelClass(o),this}removePanelClass(o){return this._ref.removePanelClass(o),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const O=new t.OlP("MatDialogData"),G=new t.OlP("mat-dialog-default-options"),S=new t.OlP("mat-dialog-scroll-strategy"),N={provide:S,deps:[u.aV],useFactory:function z(a){return()=>a.scrollStrategies.block()}};let H=0,$=(()=>{class a{constructor(e,i,n,l,r,c,g,h,A,pt){this._overlay=e,this._defaultOptions=n,this._parentDialog=l,this._dialogRefConstructor=g,this._dialogContainerType=h,this._dialogDataToken=A,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new _.x,this._afterOpenedAtThisLevel=new _.x,this._idPrefix="mat-dialog-",this.afterAllClosed=(0,V.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,w.O)(void 0))),this._scrollStrategy=c,this._dialog=i.get(D.Vq)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let n;(i={...this._defaultOptions||new M,...i}).id=i.id||`${this._idPrefix}${H++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const l=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:M,useValue:i},{provide:D.ib,useValue:i}]},templateContext:()=>({dialogRef:n}),providers:(r,c,g)=>(n=new this._dialogRefConstructor(r,i,g),n.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:g},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:n}])});return n.componentInstance=l.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{const r=this.openDialogs.indexOf(n);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return a.\u0275fac=function(e){t.$Z()},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})(),B=(()=>{class a extends ${constructor(e,i,n,l,r,c,g,h){super(e,i,l,c,g,r,F,E,O,h)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(u.aV),t.LFG(t.zs3),t.LFG(p.Ye,8),t.LFG(G,8),t.LFG(S),t.LFG(a,12),t.LFG(u.Xj),t.LFG(t.QbO,8))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})(),Q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[B,N],imports:[D.Su,u.U8,R.eL,L.BQ,L.BQ]}),a})(),X=(()=>{class a{constructor(e,i){this.dialogRef=e,this.data=i}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(F),t.Y36(O))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-modal-video"]],decls:1,vars:1,consts:[["width","100%","height","99%","frameborder","0","allowfullscreen","","include","",3,"src"]],template:function(e,i){1&e&&t._UZ(0,"iframe",0),2&e&&t.Q6J("src",i.data.url,t.uOi)}}),a})();var W=s(1481),K=s(1248),q=s(1831),tt=s(6864),et=s(8613);function it(a,o){if(1&a&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function at(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"app-movie-card",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.showMovieDetails(l))}),t.qZA()}2&a&&t.Q6J("movie",o.$implicit)}const ot=[{path:"",component:(()=>{class a{constructor(e,i,n,l,r,c){this.route=e,this.dialog=i,this.sanitizer=n,this.moviesdb=l,this.store=r,this.router=c,this.f=[1,2,3,4,5,6,7,8,9,0,1,2],this.recoList=[],this.isFav=!1}ngOnInit(){this.route.params.subscribe(e=>{this.movieId=e?.id,this.moviesdb.getMoviebyId(this.movieId).subscribe(i=>{this.movieDetails=i;const n=localStorage.getItem("favList");if(n){const l=JSON.parse(n).filter(r=>{if(r.id===this.movieDetails.id)return r});this.isFav=l.length}}),this.getRecommendMovies(),this.getMovieTrailer()})}getFormattedDate(e){return new Date(e).toLocaleString("pt-BR",{timeZone:"UTC"})}getPostUrl(){return`https://image.tmdb.org/t/p/w300_and_h450_bestv2/${this.movieDetails?.poster_path}`}getBackUrl(){return`background-image: url(https://image.tmdb.org/t/p/w1280/${this.movieDetails?.backdrop_path})`}getRecommendMovies(){this.moviesdb.getRecommendationsMovies(this.movieId).subscribe(e=>{this.recoList=e?.results})}getMovieTrailer(){this.moviesdb.getMovieVideo(this.movieId).subscribe(e=>{this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${e.results[0].key}?rel=0;&autoplay=1&mute=1`)})}openTrailerModal(){this.dialog.open(X,{width:"600px",height:"600px",data:{url:this.videoUrl}})}addMovieToFav(e){const i=localStorage.getItem("favList");if(i){const n=JSON.parse(i);return n.push(e),localStorage.setItem("favList",JSON.stringify(n)),this.isFav=!0,void this.store.dispatch((0,y.Ql)({favLength:n.length}))}this.store.dispatch((0,y.Ql)({favLength:1})),localStorage.setItem("favList",JSON.stringify([e])),this.isFav=!0}removeMovieFromFav(e){const i=localStorage.getItem("favList");if(i){const n=JSON.parse(i).filter(l=>{if(l.id!==this.movieDetails.id)return l});this.isFav=!1,localStorage.setItem("favList",JSON.stringify(n)),this.store.dispatch((0,y.L$)({favLength:n.length}))}}showMovieDetails(e){this.router.navigate([`details/${e.id}`])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.gz),t.Y36(B),t.Y36(W.H7),t.Y36(K.q),t.Y36(q.yh),t.Y36(v.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-details"]],decls:35,vars:12,consts:[[1,"details-container"],[1,"details-container__content"],[1,"details-container__content__overlay"],[1,"details-container__content_info"],[1,"details-container__poster"],["alt","",3,"src"],[1,"details-container__details"],[1,"details-container__details--title"],[1,"details-container__details--tagline"],[1,"details-container__details--subtitle"],[1,"details-container__details--description"],[1,"details-container__details--btn",3,"click"],[1,"details-container__details--btn-fav",3,"click"],[1,"release-data"],[1,"details-container__details_categories"],[4,"ngFor","ngForOf"],[1,"details-container__recommend-movies"],[1,"details-container__recommend-movies__content"],[1,"details-container__recommend-movies__title"],["src","assets/img/movie.svg","alt",""],[3,"movie","click",4,"ngFor","ngForOf"],[3,"movie","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t._UZ(6,"h3")(7,"span"),t.TgZ(8,"div",6)(9,"h1",7),t._uU(10),t.qZA(),t.TgZ(11,"p",8),t._uU(12),t.qZA(),t.TgZ(13,"span",9),t._uU(14,"Description"),t.qZA(),t.TgZ(15,"p",10),t._uU(16),t.qZA(),t.TgZ(17,"button",11),t.NdJ("click",function(){return i.openTrailerModal()}),t._uU(18," Watch trailer "),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return i.isFav?i.removeMovieFromFav(i.movieDetails):i.addMovieToFav(i.movieDetails)}),t._uU(20),t.qZA(),t.TgZ(21,"span",13),t._uU(22),t.qZA(),t.TgZ(23,"span",9),t._uU(24,"Categories"),t.qZA(),t.TgZ(25,"ul",14),t.YNc(26,it,2,1,"li",15),t.qZA()()()()(),t.TgZ(27,"div",16)(28,"div",17)(29,"div",18),t._UZ(30,"img",19),t.TgZ(31,"h3"),t._uU(32,"Recommended movies"),t.qZA()(),t.TgZ(33,"app-movie-card-list"),t.YNc(34,at,1,1,"app-movie-card",20),t.qZA()()()()),2&e&&(t.xp6(1),t.Akn(i.getBackUrl()),t.Q6J("@fadeIn",void 0),t.xp6(4),t.Q6J("src",i.getPostUrl(),t.LSH),t.xp6(5),t.hij(" ",null==i.movieDetails?null:i.movieDetails.original_title," "),t.xp6(2),t.hij(" ",null==i.movieDetails?null:i.movieDetails.tagline," "),t.xp6(4),t.hij(" ",null==i.movieDetails?null:i.movieDetails.overview," "),t.xp6(4),t.hij(" ",i.isFav?"Remove from favorites":"Add to favorites"," "),t.xp6(2),t.hij("Reselease date: ",i.getFormattedDate(null==i.movieDetails?null:i.movieDetails.release_date),""),t.xp6(4),t.Q6J("ngForOf",null==i.movieDetails?null:i.movieDetails.genres),t.xp6(1),t.Q6J("@fadeIn",void 0),t.xp6(7),t.Q6J("ngForOf",i.recoList))},dependencies:[p.sg,tt.h,et.N],styles:[".release-data[_ngcontent-%COMP%]{margin-top:20px;color:#fff}"],data:{animation:[k.J]}}),a})()}];let nt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[v.Bz.forChild(ot),v.Bz]}),a})(),st=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[p.ez,nt,I.JF,Y.m,Q]}),a})()}}]);